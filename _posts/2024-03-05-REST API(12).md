---
title: REST API(12) Event ì¡°íšŒ ë° ìˆ˜ì • REST API ê°œë°œ
date: 2024-03-05 00:00:00 +0900
categories: [âš™ï¸Back-End, ğŸƒSpring]
tags: [Spring,
RESTful,
REST,
API,
REST API,
RESTful API,
HATEOAS,
Self-descriptive,
]     
---  
## êµ¬í˜„ Package ë° Class  
![image](https://github.com/han-tomas/han-tomas.github.io/assets/124488773/44e597f2-bd7c-44ef-8649-342de4665497)  
  
---  
## Event ëª©ë¡ ì¡°íšŒ API êµ¬í˜„  
Event ëª©ë¡ì„ ì¡°íšŒí•˜ëŠ” APIë¥¼ êµ¬í˜„í•´ ë³´ê² ë‹¤.  
í…ŒìŠ¤íŠ¸ í•´ì•¼í•  ê²ƒë“¤ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  
  
> * ì´ë²¤íŠ¸ë¥¼ 30ê°œë¥¼ ë§Œë“¤ê³ , 10ê°œ ì‚¬ì´ì¦ˆë¡œ ë‘ë²ˆì§¸ í˜ì´ì§€ ì¡°íšŒ, pageable í™•ì¸  
> * Page ë§í¬ ì •ë³´ ì¶”ê°€  
> * ê°ê°ì˜ Eventë¡œ ê°€ëŠ” ë§í¬(self) ë° profile ë§í¬ ì¶”ê°€  
> * query-events ë¬¸ì„œí™”  
  
### ì´ë²¤íŠ¸ë¥¼ 30ê°œë¥¼ ë§Œë“¤ê³ , 10ê°œ ì‚¬ì´ì¦ˆë¡œ ë‘ë²ˆì§¸ í˜ì´ì§€ ì¡°íšŒ, pageable í™•ì¸
ì´ë²¤íŠ¸ë¥¼ 30ê°œë¥¼ ë§Œë“¤ê³ , ì´ë²¤íŠ¸ ëª©ë¡ ì¶œë ¥ì‹œì— í•œ í˜ì´ì§€ì— 10ê°œì”© í•´ì„œ, ë‘ ë²ˆì§¸ í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ë„ë¡ êµ¬í˜„í•´ë³´ì.  
   
#### EventControllerTests  

```java
// import ìƒëµ
import java.util.stream.IntStream; // ì¶”ê°€

import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get; // ì¶”ê°€

@RunWith(SpringRunner.class)
@SpringBootTest
@AutoConfigureMockMvc
@AutoConfigureRestDocs
@Import(RestDocsConfiguration.class)
@ActiveProfiles("test")
public class EventControllerTests {
    @Autowired
    MockMvc mockMvc;
    @Autowired
    ObjectMapper objectMapper;

    @Autowired
    EventRepository eventRepository; // ì¶”ê°€    

    // ì´ ì™¸ í…ŒìŠ¤íŠ¸ ì½”ë“œ ìƒëµ

    @Test
    @TestDescription("30ê°œì˜ ì´ë²¤íŠ¸ë¥¼ 10ê°œì”© ë‘ë²ˆì§¸ í˜ì´ì§€ ì¡°íšŒí•˜ê¸°")
    public void queryEvents() throws Exception{
        // Given
        IntStream.range(0, 30).forEach(this::genertateEvent);

        // When
        this.mockMvc.perform(get("/api/events")
                        .param("page","1")
                        .param("size","10")
                        .param("sort","name,DESC")
                )
                .andDo(print())
                .andExpect(status().isOk())
                .andExpect(jsonPath("pageable").exists())
        ;
    }

    private void genertateEvent(int index) {
        Event event = Event.builder()
                .name("event " + index)
                .description("test event")
                .build();

        this.eventRepository.save(event);
    }
}

```  
* `IntStream.range(0, 30).forEach(this::genertateEvent);`ë¥¼ í†µí•´ ì´ë²¤íŠ¸ë¥¼ 30ê°œ ë§Œë“¤ì–´ ì¤€ë‹¤.  
    * `"name"` : `"event 1~30"`
    * `"decription"` : `"test event"`  
*  MockMVCë¥¼ í†µí•´ `"/api/events"` ê²½ë¡œë¡œ `Get` ìš”ì²­ì„ ë³´ë‚¸ë‹¤.
    * `param()` ë©”ì„œë“œë¥¼ í†µí•´ íŒŒë¼ë¯¸í„° ê°’ì„ ë³´ë‚¸ë‹¤.  
* í˜ì´ì§•ê³¼ ì •ë ¬ì€ **ìŠ¤í”„ë§ ë°ì´í„° JPAê°€ ì œê³µí•˜ëŠ”** **`Pageable`** ë¥¼ ì´ìš©í•´ì„œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.  
    * page : 1ì€ ë‘ ë²ˆì§¸ í˜ì´ì§€ (0ë¶€í„° ì‹œì‘)
    * size : í•œ í˜ì´ì§€ì— 10ê°œì”© (ê¸°ë³¸ê°’ 20)  
    * sort : (`"name"`,`"DESC"`) ğŸ‘‰ ì´ë¦„ì„ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ (property,property)  
  
---  
#### EventController  
```java
// import ìƒëµ
import org.springframework.data.domain.Pageable; // ì¶”ê°€


@Controller
@RequestMapping(value = "/api/events", produces = MediaTypes.HAL_JSON_UTF8_VALUE)
public class EventController {
    private final EventRepository eventRepository;

    private final ModelMapper modelMapper;

    private final EventValidator eventValidator;

    public EventController(EventRepository eventRepository, ModelMapper modelMapper, EventValidator eventValidator) {
        this.eventRepository = eventRepository;
        this.modelMapper = modelMapper;
        this.eventValidator = eventValidator;
    }
    // ì´ ì™¸ ì½”ë“œ ìƒëµ

    @GetMapping // ì¶”ê°€
    public ResponseEntity queryEvents(Pageable pageable) { 
        return ResponseEntity.ok(this.eventRepository.findAll(pageable));
    }
}

```   

---  
#### ê²°ê³¼(ì„±ê³µ)
![image](https://github.com/han-tomas/han-tomas.github.io/assets/124488773/2ee790d5-9d5e-4876-9cdb-685b1d0f1c0f)   
![image](https://github.com/han-tomas/han-tomas.github.io/assets/124488773/9d289c48-fd30-44c2-bf9e-f5365d0c8a7d)  
* ì´ë²¤íŠ¸ê°€ ì´ 30ê°œ ìƒì„± ë˜ê³ , pageNumberëŠ” 1(ë‘ë²ˆì§¸ í˜ì´ì§€), pageSizeëŠ” 10ìœ¼ë¡œ pageableëœ ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.  
  
---  
### Page ë§í¬ ì •ë³´ ì¶”ê°€  
pageë¥¼ Resourceë¡œ ë°”ê¿”ì„œ ë§í¬ ì •ë³´ë¥¼ ì¶”ê°€í•´ì•¼í•˜ëŠ”ë°, ì´ ë•Œ **SpringData JPAê°€ ì œê³µí•´ì£¼ëŠ”** **`PagedResourceAssembler`**ê°€ ìˆë‹¤.  
#### EventController  
```java
// import ìƒëµ 
import org.springframework.data.web.PagedResourcesAssembler;
//import org.springframework.hateoas.PagedResources;
//import org.springframework.hateoas.Resource;  


@Controller
@RequestMapping(value = "/api/events", produces = MediaTypes.HAL_JSON_UTF8_VALUE)
public class EventController {
    private final EventRepository eventRepository;

    private final ModelMapper modelMapper;

    private final EventValidator eventValidator;

    public EventController(EventRepository eventRepository, ModelMapper modelMapper, EventValidator eventValidator) {
        this.eventRepository = eventRepository;
        this.modelMapper = modelMapper;
        this.eventValidator = eventValidator;
    }
    // ì´ ì™¸ ì½”ë“œ ìƒëµ

    @GetMapping
    public ResponseEntity queryEvents(Pageable pageable, PagedResourcesAssembler<Event> assembler) { // ìˆ˜ì •
        Page<Event> page = this.eventRepository.findAll(pageable); // ìˆ˜ì •
        var pagedResources = assembler.toResource(page); // ìˆ˜ì •
        //PagedResources<Resource<Event>> pagedResources = assembler.toResource(page);
        return ResponseEntity.ok(pagedResources);
    }
}
```  
* **SpringData JPAê°€ ì œê³µí•´ì£¼ëŠ”** **`PagedResourceAssembler`**ë¥¼ í†µí•´ `page`ë¥¼ `Resource`í™” í•´ì¤€ë‹¤.  
* Javaì—ì„œ ì œê³µí•˜ëŠ” `var`íƒ€ì…ìœ¼ë¡œ ê¸´ ì½”ë“œë¥¼ ê°„ì†Œí™” í•  ìˆ˜ ìˆë‹¤.  
  
---  
#### EventControllerTests  
```java
@RunWith(SpringRunner.class)
@SpringBootTest
@AutoConfigureMockMvc
@AutoConfigureRestDocs
@Import(RestDocsConfiguration.class)
@ActiveProfiles("test")
public class EventControllerTests {
    @Autowired
    MockMvc mockMvc;
    @Autowired
    ObjectMapper objectMapper;

    @Autowired
    EventRepository eventRepository;    

    // ì´ ì™¸ í…ŒìŠ¤íŠ¸ ì½”ë“œ ìƒëµ

    @Test
    @TestDescription("30ê°œì˜ ì´ë²¤íŠ¸ë¥¼ 10ê°œì”© ë‘ë²ˆì§¸ í˜ì´ì§€ ì¡°íšŒí•˜ê¸°")
    public void queryEvents() throws Exception{
        // Given
        IntStream.range(0, 30).forEach(this::genertateEvent);

        // When
        this.mockMvc.perform(get("/api/events")
                        .param("page","1")
                        .param("size","10")
                        .param("sort","name,DESC")
                )
                .andDo(print())
                .andExpect(status().isOk())
                .andExpect(jsonPath("page").exists()) // ìˆ˜ì •
        ;
    }

    private void genertateEvent(int index) {
        Event event = Event.builder()
                .name("event " + index)
                .description("test event")
                .build();

        this.eventRepository.save(event);
    }
}

```  
  
---
#### ê²°ê³¼ (ì„±ê³µ)  
![image](https://github.com/han-tomas/han-tomas.github.io/assets/124488773/e6630c31-022c-4bff-a079-514768c5f2de)  
![image](https://github.com/han-tomas/han-tomas.github.io/assets/124488773/c9f2847a-31e3-4ea5-87fa-089dbc846410)  
* `"_embedded"`ì•ˆì— `"eventList"`ë“¤ì–´ê°„ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆê³   
* `"page"` í˜ì´ì§€ ì •ë³´ì™€ `"_links"` ë‚´ì— ì´ì „/ë‹¤ìŒ(`"prev"`,`"next"`), ì²˜ìŒ(`"first"`), ë§ˆì§€ë§‰(`"last"`) í˜ì´ì§€ë¡œ ê°€ëŠ” ë§í¬ë“¤ë„ í™•ì¸í•´ ë³¼ ìˆ˜ ìˆë‹¤.  
  
---  
### ê°ê°ì˜ Eventë¡œ ê°€ëŠ” ë§í¬(self) ë° profile ë§í¬ ì¶”ê°€, query-events ë¬¸ì„œí™”
ì´ë²¤íŠ¸ ëª©ë¡ í˜ì´ì§€ ìì²´ì˜ `self`ë§í¬ëŠ” ìˆì§€ë§Œ, ê°ê°ì˜ ì´ë²¤íŠ¸ ìì‹ ì˜ `self`ë§í¬ëŠ” ì—†ë‹¤. ì´ë¥¼ ì¶”ê°€í•´ ì£¼ì.  
  
#### EventController  
```java
@Controller
@RequestMapping(value = "/api/events", produces = MediaTypes.HAL_JSON_UTF8_VALUE)
public class EventController {
    private final EventRepository eventRepository;

    private final ModelMapper modelMapper;

    private final EventValidator eventValidator;

    public EventController(EventRepository eventRepository, ModelMapper modelMapper, EventValidator eventValidator) {
        this.eventRepository = eventRepository;
        this.modelMapper = modelMapper;
        this.eventValidator = eventValidator;
    }
    // ì´ ì™¸ ì½”ë“œ ìƒëµ

    @GetMapping
    public ResponseEntity queryEvents(Pageable pageable, PagedResourcesAssembler<Event> assembler) { 
        Page<Event> page = this.eventRepository.findAll(pageable);
        var pagedResources = assembler.toResource(page, e -> new EventResource(e)); // ìˆ˜ì •
        pagedResources.add(new Link("/docs/index.html#resources-events-list").withRel("profile")); // ì¶”ê°€
        return ResponseEntity.ok(pagedResources);
    }
}
```  
* ëŒë‹¤ í‘œí˜„ì‹ìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ ê°ê°ì˜ ì´ë²¤íŠ¸ì— ëŒ€í•œ `self`ë§í¬ë¥¼ ì¶”ê°€í•´ ì¤„ ìˆ˜ ìˆë‹¤.  
* `profile`ë¡œ ê°€ëŠ” ë§í¬ë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.  
   
---  
#### EventControllerTests  
```java
@RunWith(SpringRunner.class)
@SpringBootTest
@AutoConfigureMockMvc
@AutoConfigureRestDocs
@Import(RestDocsConfiguration.class)
@ActiveProfiles("test")
public class EventControllerTests {
    @Autowired
    MockMvc mockMvc;
    @Autowired
    ObjectMapper objectMapper;

    @Autowired
    EventRepository eventRepository;  

    // ì´ ì™¸ í…ŒìŠ¤íŠ¸ ì½”ë“œ ìƒëµ

    @Test
    @TestDescription("30ê°œì˜ ì´ë²¤íŠ¸ë¥¼ 10ê°œì”© ë‘ë²ˆì§¸ í˜ì´ì§€ ì¡°íšŒí•˜ê¸°")
    public void queryEvents() throws Exception{
        // Given
        IntStream.range(0, 30).forEach(this::genertateEvent);

        // When
        this.mockMvc.perform(get("/api/events")
                        .param("page","1")
                        .param("size","10")
                        .param("sort","name,DESC")
                )
                .andDo(print())
                .andExpect(status().isOk())
                .andExpect(jsonPath("page").exists())
                .andExpect(jsonPath("_embedded.eventList[0]._links.self").exists())
                .andExpect(jsonPath("_links.self").exists())
                .andExpect(jsonPath("_links.profile").exists())
                .andDo(document("query-events")
                    // ë¬¸ì„œí™” ìƒëµ
                )
        ;
    }

    private void genertateEvent(int index) {
        Event event = Event.builder()
                .name("event " + index)
                .description("test event")
                .build();

        this.eventRepository.save(event);
    }
}

```  
* `.andDo(document("query-events"))`ë¡œ ë¬¸ì„œí™” ì‹œì— ì´ë²¤íŠ¸ ìƒì„± API (`createEvent()`)ì²˜ëŸ¼ ë¬¸ì„œí™” í•´ì¤˜ì•¼í•˜ì§€ë§Œ, ê·¸ ê³¼ì •ì€ ìƒëµí•˜ê² ë‹¤.
  
#### ê²°ê³¼ (ì„±ê³µ)  
![image](https://github.com/han-tomas/han-tomas.github.io/assets/124488773/a39ec9a2-c353-458c-b71c-b1102fdeeb14)  
![image](https://github.com/han-tomas/han-tomas.github.io/assets/124488773/1a12c256-fd27-4c3a-af95-4565e07dffb0)  
  
## Event ì¡°íšŒ API êµ¬í˜„  
ì´ë²ˆì—ëŠ” ì´ë²¤íŠ¸ í•œ ê±´ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ” APIë¥¼ êµ¬í˜„í•´ ë³´ê² ë‹¤.  
í…ŒìŠ¤íŠ¸ í•´ì•¼í•  ê²ƒë“¤ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  
  
> * ì¡´ì¬í•˜ëŠ” ì´ë²¤íŠ¸ ë¦¬ì†ŒìŠ¤ í™•ì¸  
> * ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì´ë²¤íŠ¸ 404ì‘ë‹µ í™•ì¸   
> * get-an-event ë¬¸ì„œí™”  
  
### ì¡´ì¬í•˜ëŠ” ì´ë²¤íŠ¸ ë¦¬ì†ŒìŠ¤ í™•ì¸ , ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì´ë²¤íŠ¸ 404ì‘ë‹µ í™•ì¸  
ì´ë²¤íŠ¸ë¥¼ ì¡°íšŒí•  ë•Œ ì¡´ì¬í•˜ëŠ” ì´ë²¤íŠ¸ì— ëŒ€í•œ ë¦¬ì†ŒìŠ¤(ë°ì´í„°+ë§í¬)ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ì•¼ í•˜ê³ ,  
ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì´ë²¤íŠ¸ë¥¼ ì¡°íšŒí•  ë•ŒëŠ” `Not Found(404)` ì‘ë‹µì„ í™•ì¸ í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.  
  
#### EventControllerTests  
```java
@RunWith(SpringRunner.class)
@SpringBootTest
@AutoConfigureMockMvc
@AutoConfigureRestDocs
@Import(RestDocsConfiguration.class)
@ActiveProfiles("test")
public class EventControllerTests {
    @Autowired
    MockMvc mockMvc;
    @Autowired
    ObjectMapper objectMapper;

    @Autowired
    EventRepository eventRepository;  

    // ì´ ì™¸ í…ŒìŠ¤íŠ¸ ì½”ë“œ ìƒëµ

    private Event genertateEvent(int index) {
        Event event = Event.builder()
                .name("event " + index)
                .description("test event")
                .build();

        return this.eventRepository.save(event);
    }

    @Test  // [1] 
    @TestDescription("ê¸°ì¡´ì˜ ì´ë²¤íŠ¸ë¥¼ í•˜ë‚˜ ì¡°íšŒí•˜ê¸°")
    public void getEvent() throws Exception{
        // Given
        Event event = this.genertateEvent(100);

        // When & Then
        this.mockMvc.perform(get("/api/events/{id}", event.getId()))
                .andExpect(status().isOk())
                .andExpect(jsonPath("name").exists())
                .andExpect(jsonPath("id").exists())
                .andExpect(jsonPath("_links.self").exists())
                .andExpect(jsonPath("_links.profile").exists())
                .andDo(document("get-an-event"))
        ;
    }

    @Test // [2]
    @TestDescription("ì—†ëŠ” ì´ë²¤íŠ¸ë¥¼ ì¡°íšŒí–ˆì„ ë•Œ 404 ì‘ë‹µë°›ê¸°")
    public void getEvent404() throws Exception{
        // When & Then
        this.mockMvc.perform(get("/api/events/11883"))
                .andExpect(status().isNotFound());
    }
}
```  
* `[1]` : ì¡´ì¬í•˜ëŠ” ì´ë²¤íŠ¸ í•˜ë‚˜ë¥¼ ì¡°íšŒí•˜ëŠ” í…ŒìŠ¤íŠ¸ì´ë‹¤.  
    * ë¨¼ì € ì´ë²¤íŠ¸(`100`)ë¥¼ í•˜ë‚˜ ìƒì„±í•œë‹¤.  
    * `"/api/events/100"` ê²½ë¡œë¡œ `Get` ìš”ì²­ì„ ë³´ë‚¸ë‹¤.  
    * ì‘ë‹µ ìƒíƒœë¥¼ í™•ì¸í•˜ê³ , `name`,`id` ë°ì´í„°ì™€ `self`,`profile`ë§í¬ ì •ë³´ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.  
    * `"get-an-event"`ë¡œ ë¬¸ì„œí™” í•œë‹¤.  
* `[2]` : ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì´ë²¤íŠ¸ë¥¼ ì¡°íšŒí•˜ì—¬ `Not Found(404)`ì‘ë‹µì„ ì–»ëŠ” í…ŒìŠ¤íŠ¸ì´ë‹¤.  
    * ì´ë²¤íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ê³¼ì •ì„ ìƒëµí•œë‹¤.  
    * `"/api/events/11883"`ë¼ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì•„ì´ë””(`11883`)ì— ëŒ€í•œ `Get` ìš”ì²­ì„ ë³´ë‚¸ë‹¤.  
    * `Not Found(404)`ì‘ë‹µì„ í™•ì¸í•œë‹¤.  
  
---  
#### EventController  
```java
@Controller
@RequestMapping(value = "/api/events", produces = MediaTypes.HAL_JSON_UTF8_VALUE)
public class EventController {
    private final EventRepository eventRepository;

    private final ModelMapper modelMapper;

    private final EventValidator eventValidator;

    public EventController(EventRepository eventRepository, ModelMapper modelMapper, EventValidator eventValidator) {
        this.eventRepository = eventRepository;
        this.modelMapper = modelMapper;
        this.eventValidator = eventValidator;
    }
    // ì´ ì™¸ ì½”ë“œ ìƒëµ

    @GetMapping("/{id}")
    public ResponseEntity getEvent(@PathVariable Integer id){
        Optional<Event> optionalEvent = this.eventRepository.findById(id);
        if (optionalEvent.isEmpty()) {
            return ResponseEntity.notFound().build();
        }

        Event event = optionalEvent.get();
        EventResource eventResource = new EventResource(event);
        eventResource.add(new Link("/docs/index.html#resources-events-get").withRel("profile"));
        return ResponseEntity.ok(eventResource);
    }
}
```  
* **`@PathVariable`**  
    * ê²½ë¡œ ë³€ìˆ˜ë¥¼ í‘œì‹œí•˜ê¸° ìœ„í•´ ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ì— ì‚¬ìš©ëœë‹¤.  
    * ê²½ë¡œ ë³€ìˆ˜ëŠ” ì¤‘ê´„í˜¸ `{}`ë¡œ ë‘˜ëŸ¬ì‹¸ì¸ ê°’ì„ ë‚˜íƒ€ë‚¸ë‹¤.
* `Optional`íƒ€ì…ìœ¼ë¡œ `this.eventRepository.findById(id);` JPA ë©”ì„œë“œë¥¼ í†µí•´ DBì—ì„œ `id`ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ë§¤í•‘í•˜ì—¬ ì°¾ëŠ”ë‹¤.  
    * `Optional`í´ë˜ìŠ¤ëŠ” nullì´ ì˜¬ ìˆ˜ ìˆëŠ” ê°’ì„ ê°ì‹¸ëŠ” Wrapper í´ë˜ìŠ¤ë¡œ  `NPE(NullPointerException)`ì„ ë°©ì§€í•œë‹¤.  
* ê°ì²´ ê°’ì´ ë¹„ì–´ìˆìœ¼ë©´ `Not Found(404)`ì‘ë‹µ ë¦¬í„´  
* ê°’ì´ ìˆìœ¼ë©´ `event` ê°ì²´ì— `get()`ì„ í†µí•´ ë‹´ì•„ì£¼ê³   
    * `event`ê°ì²´ë¥¼ `EventResource`íƒ€ì…ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤í™” í•´ì¤€ë‹¤.  
    * ì´ë²¤íŠ¸ì— í•´ë‹¹í•˜ëŠ” `profile`ë§í¬ë¥¼ `eventResource`ì— ì¶”ê°€í•´ì¤€ë‹¤.  
* `eventResource` ê°ì²´ë¥¼ ë¦¬í„´í•œë‹¤.     

---  
#### ê²°ê³¼ (ì„±ê³µ)  
![image](https://github.com/han-tomas/han-tomas.github.io/assets/124488773/8f6beb9c-626a-4342-a6b4-271103dd20fa)  

---  
## Event ìˆ˜ì • API êµ¬í˜„  
ë§Œë“  ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì •í•˜ëŠ” APIë¥¼ êµ¬í˜„í•´ ë³´ì.  
í…ŒìŠ¤íŠ¸ í•´ì•¼í•  ê²ƒë“¤ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  
  
> * ì •ìƒì ìœ¼ë¡œ ìˆ˜ì •í•œ ê²½ìš° ì´ë²¤íŠ¸ ë¦¬ì†ŒìŠ¤ ì‘ë‹µ  
> * ì…ë ¥ ê°’ì´ ì˜ëª»ë˜ì–´ ìˆëŠ” ê²½ìš° ì´ë²¤íŠ¸ ìˆ˜ì • ì‹¤íŒ¨  
>   * ë„ë©”ì¸ ë¡œì§ìœ¼ë¡œ ë°ì´í„° ê²€ì¦ ì‹¤íŒ¨ì‹œ, `Bad Request(400)`ì‘ë‹µ í™•ì¸   
>   * ì…ë ¥ ë°ì´í„°(ë°”ì¸ë”©í•˜ëŠ” ë°ì´í„°)ê°€ ì´ìƒí•œ ê²½ìš° `Bad Request(400)`ì‘ë‹µ í™•ì¸  
> * ìˆ˜ì •í•˜ë ¤ëŠ” ì´ë²¤íŠ¸ê°€ ì—†ëŠ” ê²½ìš° `Not Found(404)`ì‘ë‹µ í™•ì¸  


  
### ì •ìƒì ìœ¼ë¡œ ìˆ˜ì •í•œ ê²½ìš° ì´ë²¤íŠ¸ ë¦¬ì†ŒìŠ¤ ì‘ë‹µ, ë¬¸ì„œí™”  
#### EventControllerTests  
```java
@RunWith(SpringRunner.class)
@SpringBootTest
@AutoConfigureMockMvc
@AutoConfigureRestDocs
@Import(RestDocsConfiguration.class)
@ActiveProfiles("test")
public class EventControllerTests {
    @Autowired
    MockMvc mockMvc;
    @Autowired
    ObjectMapper objectMapper;

    @Autowired
    EventRepository eventRepository;  

    @Autowired
    ModelMapper modelMapper; //ì¶”ê°€

    // ì´ ì™¸ í…ŒìŠ¤íŠ¸ ì½”ë“œ ìƒëµ

    private Event genertateEvent(int index) {
        Event event = Event.builder()
                .name("event " + index)
                .description("test event")
                .beginEnrollmentDateTime(LocalDateTime.of(2024,02,19,14,21))
                .closeEnrollmentDateTime(LocalDateTime.of(2024,02,20,14,21))
                .beginEventDateTime(LocalDateTime.of(2024,02,21,14,21))
                .endEventDateTime(LocalDateTime.of(2024,02,22,14,21))
                .basePrice(100)
                .maxPrice(200)
                .limitOfEnrollment(100)
                .location("ê°•ë‚¨ì—­ D2 ìŠ¤íƒ€íŠ¸ì—… íŒ©í† ë¦¬")
                .free(false)
                .offline(true)
                .eventStatus(EventStatus.DRAFT)
                .build();

        return this.eventRepository.save(event);
    }

    @Test
    @TestDescription("ì´ë²¤íŠ¸ë¥¼ ì •ìƒì ìœ¼ë¡œ ìˆ˜ì •í•˜ê¸°")
    public void updateEvent() throws Exception{
        // Given
        Event event = this.genertateEvent(200);

        EventDto eventDto = this.modelMapper.map(event, EventDto.class);
        String eventName = "Update Event";
        eventDto.setName(eventName);

        // When & Then
        this.mockMvc.perform(put("/api/events/{id}", event.getId())
                        .contentType(MediaType.APPLICATION_JSON_UTF8)
                        .content(this.objectMapper.writeValueAsString(eventDto))
                )
                .andDo(print())
                .andExpect(status().isOk())
                .andExpect(jsonPath("name").value(eventName))
                .andExpect(jsonPath("_links.self").exists())
                .andDo(document("update-event"))
        ;
    }
}
```  
* ì´ë²¤íŠ¸(200)ì„ ìƒì„±í•´ì¤€ë‹¤.  
* `ModelMapper`ë¥¼ ì´ìš©í•˜ì—¬ `event` ê°ì²´ë¥¼ `eventDto`ê°ì²´ì— ë®ì–´ì¤€ë‹¤.  
* `name`ì„ ìˆ˜ì •(`"Update Event"`ìœ¼ë¡œ) í•´ì¤€ë‹¤.  
* `"/api/events/{id}"`ê²½ë¡œë¡œ `Put`í•´ì¤€ë‹¤.  
    * `ObjectMapper`ë¥¼ í†µí•´ `eventDto` ê°ì²´ë¥¼ JSON ê°’ìœ¼ë¡œ ë³´ë‚¸ë‹¤.  
* `name`ì´ `"Update Event"`ë¡œ ìˆ˜ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.  
* `self`,`profile` ë§í¬ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.  
* `"update-event"`ë¡œ ë¬¸ì„œí™” í•œë‹¤.
  
---  
### ë„ë©”ì¸ ë¡œì§ìœ¼ë¡œ ë°ì´í„° ê²€ì¦ ì‹¤íŒ¨ì‹œ, `Bad Request(400)`ì‘ë‹µ í™•ì¸   
#### EventControllerTests  
```java
@RunWith(SpringRunner.class)
@SpringBootTest
@AutoConfigureMockMvc
@AutoConfigureRestDocs
@Import(RestDocsConfiguration.class)
@ActiveProfiles("test")
public class EventControllerTests {
    @Autowired
    MockMvc mockMvc;
    @Autowired
    ObjectMapper objectMapper;

    @Autowired
    EventRepository eventRepository;  

    @Autowired
    ModelMapper modelMapper; //ì¶”ê°€

    // ì´ ì™¸ í…ŒìŠ¤íŠ¸ ì½”ë“œ ìƒëµ

    private Event genertateEvent(int index) {
        Event event = Event.builder()
                .name("event " + index)
                .description("test event")
                .beginEnrollmentDateTime(LocalDateTime.of(2024,02,19,14,21))
                .closeEnrollmentDateTime(LocalDateTime.of(2024,02,20,14,21))
                .beginEventDateTime(LocalDateTime.of(2024,02,21,14,21))
                .endEventDateTime(LocalDateTime.of(2024,02,22,14,21))
                .basePrice(100)
                .maxPrice(200)
                .limitOfEnrollment(100)
                .location("ê°•ë‚¨ì—­ D2 ìŠ¤íƒ€íŠ¸ì—… íŒ©í† ë¦¬")
                .free(false)
                .offline(true)
                .eventStatus(EventStatus.DRAFT)
                .build();

        return this.eventRepository.save(event);
    }

    @Test
    @TestDescription("ì…ë ¥ê°’ì´ ë¹„ì–´ìˆëŠ” ê²½ìš°ì— ì´ë²¤íŠ¸ ìˆ˜ì • ì‹¤íŒ¨")
    public void updateEvent400_Empty() throws Exception{
        // Given
        Event event = this.genertateEvent(200);

        EventDto eventDto = new EventDto();

        // When & Then
        this.mockMvc.perform(put("/api/events/{id}", event.getId())
                        .contentType(MediaType.APPLICATION_JSON_UTF8)
                        .content(this.objectMapper.writeValueAsString(eventDto))
                )
                .andDo(print())
                .andExpect(status().isBadRequest());
    }
}
```  
* ì´ë²¤íŠ¸(200)ì„ ìƒì„±í•´ì¤€ë‹¤.   
* `eventDto` ê°ì²´ë¥¼ ìƒì„±í•˜ë˜, **ê°’ì„ ë„£ì–´ì£¼ì§€ ì•ŠëŠ”ë‹¤.**  
* `eventDto` ê°ì²´ë¥¼ ë³´ë‚´ì£¼ê³  `Bad Request(400)`ì‘ë‹µì„ í™•ì¸í•œë‹¤.  
  
---  
### ì…ë ¥ ë°ì´í„°(ë°”ì¸ë”©í•˜ëŠ” ë°ì´í„°)ê°€ ì´ìƒí•œ ê²½ìš° `Bad Request(400)`ì‘ë‹µ í™•ì¸  
#### EventControllerTests
```java
@RunWith(SpringRunner.class)
@SpringBootTest
@AutoConfigureMockMvc
@AutoConfigureRestDocs
@Import(RestDocsConfiguration.class)
@ActiveProfiles("test")
public class EventControllerTests {
    @Autowired
    MockMvc mockMvc;
    @Autowired
    ObjectMapper objectMapper;

    @Autowired
    EventRepository eventRepository;  

    @Autowired
    ModelMapper modelMapper; //ì¶”ê°€

    // ì´ ì™¸ í…ŒìŠ¤íŠ¸ ì½”ë“œ ìƒëµ

    private Event genertateEvent(int index) {
        Event event = Event.builder()
                .name("event " + index)
                .description("test event")
                .beginEnrollmentDateTime(LocalDateTime.of(2024,02,19,14,21))
                .closeEnrollmentDateTime(LocalDateTime.of(2024,02,20,14,21))
                .beginEventDateTime(LocalDateTime.of(2024,02,21,14,21))
                .endEventDateTime(LocalDateTime.of(2024,02,22,14,21))
                .basePrice(100)
                .maxPrice(200)
                .limitOfEnrollment(100)
                .location("ê°•ë‚¨ì—­ D2 ìŠ¤íƒ€íŠ¸ì—… íŒ©í† ë¦¬")
                .free(false)
                .offline(true)
                .eventStatus(EventStatus.DRAFT)
                .build();

        return this.eventRepository.save(event);
    }

    @Test
    @TestDescription("ì…ë ¥ê°’ì´ ì˜ëª»ëœ ê²½ìš°ì— ì´ë²¤íŠ¸ ìˆ˜ì • ì‹¤íŒ¨")
    public void updateEvent400_Wrong() throws Exception{
        // Given
        Event event = this.genertateEvent(200);

        EventDto eventDto = this.modelMapper.map(event, EventDto.class);
        eventDto.setBasePrice(20000);
        eventDto.setMaxPrice(1000);

        // When & Then
        this.mockMvc.perform(put("/api/events/{id}", event.getId())
                        .contentType(MediaType.APPLICATION_JSON_UTF8)
                        .content(this.objectMapper.writeValueAsString(eventDto))
                )
                .andDo(print())
                .andExpect(status().isBadRequest());
    }
}
```  
* ì´ë²¤íŠ¸(200)ì„ ìƒì„±í•´ì¤€ë‹¤.  
* `event` ê°ì²´ ê°’ì„ `eventDto` ë®ì–´ì£¼ê³ , `basePrice`ê°’ê³¼ `maxPrice`ê°’ì„ **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ìƒ ì˜ëª»ëœ ê°’ìœ¼ë¡œ ìˆ˜ì •**í•œë‹¤.  
* `eventDto` ê°ì²´ë¥¼ ë³´ë‚´ì£¼ê³  `Bad Request(400)`ì‘ë‹µì„ í™•ì¸í•œë‹¤.  
  
---  
### ìˆ˜ì •í•˜ë ¤ëŠ” ì´ë²¤íŠ¸ê°€ ì—†ëŠ” ê²½ìš° `Not Found(404)`ì‘ë‹µ í™•ì¸  
#### EventControllerTests
```java
@RunWith(SpringRunner.class)
@SpringBootTest
@AutoConfigureMockMvc
@AutoConfigureRestDocs
@Import(RestDocsConfiguration.class)
@ActiveProfiles("test")
public class EventControllerTests {
    @Autowired
    MockMvc mockMvc;
    @Autowired
    ObjectMapper objectMapper;

    @Autowired
    EventRepository eventRepository;  

    @Autowired
    ModelMapper modelMapper; //ì¶”ê°€

    // ì´ ì™¸ í…ŒìŠ¤íŠ¸ ì½”ë“œ ìƒëµ

    private Event genertateEvent(int index) {
        Event event = Event.builder()
                .name("event " + index)
                .description("test event")
                .beginEnrollmentDateTime(LocalDateTime.of(2024,02,19,14,21))
                .closeEnrollmentDateTime(LocalDateTime.of(2024,02,20,14,21))
                .beginEventDateTime(LocalDateTime.of(2024,02,21,14,21))
                .endEventDateTime(LocalDateTime.of(2024,02,22,14,21))
                .basePrice(100)
                .maxPrice(200)
                .limitOfEnrollment(100)
                .location("ê°•ë‚¨ì—­ D2 ìŠ¤íƒ€íŠ¸ì—… íŒ©í† ë¦¬")
                .free(false)
                .offline(true)
                .eventStatus(EventStatus.DRAFT)
                .build();

        return this.eventRepository.save(event);
    }

    @Test
    @TestDescription("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì´ë²¤íŠ¸ ìˆ˜ì • ì‹¤íŒ¨")
    public void updateEvent404() throws Exception{
        // Given
        Event event = this.genertateEvent(200);

        EventDto eventDto = this.modelMapper.map(event, EventDto.class);

        // When & Then
        this.mockMvc.perform(put("/api/events/1231231")
                        .contentType(MediaType.APPLICATION_JSON_UTF8)
                        .content(this.objectMapper.writeValueAsString(eventDto))
                )
                .andDo(print())
                .andExpect(status().isNotFound());
    }
}
```   
* ì´ë²¤íŠ¸(200)ì„ ìƒì„±í•´ì¤€ë‹¤. 
* `"/api/events/1231231"`ë¼ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ” `id`ê°’ìœ¼ë¡œ `Put`ìš”ì²­ì„ ë³´ë‚¸ë‹¤.  
* `Not Found(404)`ì‘ë‹µì„ í™•ì¸í•œë‹¤.  
  
---  
### EventController  
```java
@Controller
@RequestMapping(value = "/api/events", produces = MediaTypes.HAL_JSON_UTF8_VALUE)
public class EventController {
    private final EventRepository eventRepository;

    private final ModelMapper modelMapper;

    private final EventValidator eventValidator;

    public EventController(EventRepository eventRepository, ModelMapper modelMapper, EventValidator eventValidator) {
        this.eventRepository = eventRepository;
        this.modelMapper = modelMapper;
        this.eventValidator = eventValidator;
    }
    // ì´ ì™¸ ì½”ë“œ ìƒëµ 

    private  ResponseEntity badRequest(Errors errors){
        return ResponseEntity.badRequest().body(new ErrorsResource(errors));
    }

    @PutMapping("/{id}")
    public ResponseEntity updateEvent(@PathVariable Integer id,
                                      @RequestBody @Valid EventDto eventDto,
                                      Errors errors) {
        Optional<Event> optionalEvent = this.eventRepository.findById(id);
        if (optionalEvent.isEmpty()){
            return ResponseEntity.notFound().build();
        }
        // ë„ë©”ì¸ ë¡œì§ ê²€ì¦
        if(errors.hasErrors()){
            return  badRequest(errors);
        }
        // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê²€ì¦
        this.eventValidator.validate(eventDto, errors);
        if (errors.hasErrors()){
            return badRequest(errors);
        }

        Event existingEvent = optionalEvent.get();
        //existingEvent.setName(eventDto.getName());
        this.modelMapper.map(eventDto, existingEvent);
        Event savedEvent = this.eventRepository.save(existingEvent);
        EventResource eventResource = new EventResource(savedEvent);
        eventResource.add(new Link("/docs/index.html#resources-events-update").withRel("profile"));

        return ResponseEntity.ok(eventResource);
    }
}
```  
* **`@PathVariable`**ë¡œ ê²½ë¡œ ë³€ìˆ˜ `id`ê°’ì„ ë°›ì•„ì˜¨ë‹¤.  
* **`@RequestBody`**ë¡œ ìš”ì²­ ë³¸ë¬¸ì— `EventDto`íƒ€ì…ì˜ `eventDto`ê°ì²´ë¥¼ ë°›ëŠ”ë‹¤.  
* **`@Valid`**ë¡œ `EventDto`ì˜ ë„ë©”ì¸ ë¡œì§ì„ ê²€ì¦í•˜ê³ , ë°œìƒí•œ ì—ëŸ¬ë¥¼ `errors` ê°ì²´ì— ë‹´ëŠ”ë‹¤.  
*  DBì—ì„œ `id`ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ë§¤í•‘í•˜ì—¬ ì°¾ì•„ `optionalEvent` ê°ì²´ì— ë‹´ëŠ”ë‹¤.  
*  `optionalEvent` ê°ì²´ ê°’ì´ ë¹„ì–´ìˆìœ¼ë©´ `Not Found(404)`ì‘ë‹µ ë¦¬í„´.  
* `@Valid`ë¡œ ë„ë©”ì¸ ë¡œì§ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê²€ì¦í•˜ì—¬ ë°œìƒí•œ ì—ëŸ¬ê°€ ìˆì„ ì‹œ, `Bad Request(400)`ì‘ë‹µ ë¦¬í„´.<br>(ì´ë•Œ, `ErrorResource`ë„ ë¦¬í„´í•˜ì—¬, `index`ë§í¬ë„ ì¶œë ¥)  
* `EventValidator`ë¡œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê²€ì¦í•˜ì—¬ ë°œìƒí•œ ì—ëŸ¬ê°€ ìˆì„ ì‹œ, `Bad Request(400)`ì‘ë‹µ ë¦¬í„´.<br>(ìœ„ì™€ ê°™ìŒ)  
* `optionalEvent`ì´ ìˆìœ¼ë©´ `existingEvent`ê°ì²´ì— ë‹´ì•„ì¤€ë‹¤.
* `ModelMapper`ë¡œ ìˆ˜ì •í•˜ê³  ì‹¶ì€ ê°’(`eventDto`ê°ì²´ì— ë‹´ê¸´ ê°’)ì„ `existingEvent`ê°ì²´ì˜ ê°’ì— ë®ì–´ì¤€ë‹¤.  
* `eventRepository`ì— ì €ì¥í•˜ê³  `savedEvent`ê°ì²´ì— ë‹´ì•„ì¤€ë‹¤.  
    * í˜„ì¬ ì–´ë– í•œ íŠ¸ëœì­ì…˜ì— ë“¤ì–´ìˆëŠ”ê²ƒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì—, ë³€ê²½ì‚¬í•­ì´ ìë™ìœ¼ë¡œ dirty checkingë˜ì–´ ë°ì´í„°ë² ì´ìŠ¤ì— ë°˜ì˜ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ëª…ì‹œì ìœ¼ë¡œ saveí•˜ëŠ” ê³¼ì •ì´ ê¼­ í•„ìš”í•˜ë‹¤.  
    * Serviceë¥¼ ë§Œë“¤ì–´ì•¼ ë°ì´í„°ë² ì´ìŠ¤ì— ë°˜ì˜ëœë‹¤.  
* `savedEvent`ë¥¼ `eventResource`ë¡œ ë¦¬ì†ŒìŠ¤í™” í•˜ê³ , `profile`ë§í¬ë¥¼ ì¶”ê°€í•´ ì¤€ë‹¤.  
* `eventResource`ë¥¼ ì‘ë‹µ bodyì— ë‹´ì•„ ë¦¬í„´  
  
---    
### ê²°ê³¼ (ì„±ê³µ)  
![image](https://github.com/han-tomas/han-tomas.github.io/assets/124488773/948063e6-8f83-474d-a0d0-0f9825794696)  
  
---  
## í…ŒìŠ¤íŠ¸ ì½”ë“œ ë¦¬íŒ©í† ë§ (ì¶”ê°€)  
```java
@RunWith(SpringRunner.class)
@SpringBootTest
@AutoConfigureMockMvc
@AutoConfigureRestDocs
@Import(RestDocsConfiguration.class)
@ActiveProfiles("test")
```  
```java
    @Autowired
    MockMvc mockMvc;
    @Autowired
    ObjectMapper objectMapper;
    @Autowired
    ModelMapper modelMapper;
```
`EventControllerTests`ì™€ `IndexControllerTest` ì½”ë“œë¥¼ ë³´ë©´ ìœ„ì™€ ê°™ì´ ì¤‘ë³µìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì½”ë“œê°€ ë§ë‹¤.  
ê·¸ë¦¬ê³  ê·¸ ì½”ë“œë“¤ì€ ì•ìœ¼ë¡œì˜ ì»¨íŠ¸ë¡¤ëŸ¬ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±ì‹œì—ë„ ë˜‘ê°™ì´ ì¤‘ë³µìœ¼ë¡œ ì‚¬ìš©ë  ê²ƒì´ë‹¤.  
`BaseControllerTest`ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì¤‘ë³µë˜ëŠ” ì½”ë“œë¥¼ ëª¨ì•„ì£¼ê³ , ì´ë¥¼ ìƒì†ë°›ì•„ì„œ ì‚¬ìš©í•˜ëŠ” ì‹ìœ¼ë¡œ ë¦¬íŒ©í† ë§í•˜ì—¬ **ì½”ë“œë¥¼ ê°„ì†Œí™”** í•´ë³´ì.  
  
###  BaseControllerTest  
```java
package me.hantomas.restapi.common;

import com.fasterxml.jackson.databind.ObjectMapper;
import org.junit.Ignore;
import org.junit.runner.RunWith;
import org.modelmapper.ModelMapper;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.restdocs.AutoConfigureRestDocs;
import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.context.annotation.Import;
import org.springframework.test.context.ActiveProfiles;
import org.springframework.test.context.junit4.SpringRunner;
import org.springframework.test.web.servlet.MockMvc;

@RunWith(SpringRunner.class)
@SpringBootTest
@AutoConfigureMockMvc
@AutoConfigureRestDocs
@Import(RestDocsConfiguration.class)
@ActiveProfiles("test")
@Ignore
public class BaseControllerTest {
    @Autowired
    protected MockMvc mockMvc;
    @Autowired
    protected ObjectMapper objectMapper;
    @Autowired
    protected ModelMapper modelMapper;
}

```  
* **`@Ignore`** : Junitì´ ì œê³µí•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ, í…ŒìŠ¤íŠ¸ë¥¼ ê°€ì§€ê³ ìˆëŠ” í´ë˜ìŠ¤ë¡œ ê°„ì£¼ë˜ì§€ ì•Šë„ë¡ í•œë‹¤.   
  
---  
### EventControllerTests & IndexControllerTest
```java
package me.hantomas.restapi.events;

import me.hantomas.restapi.common.BaseControllerTest;
import me.hantomas.restapi.common.TestDescription;
import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.hateoas.MediaTypes;
import org.springframework.http.HttpHeaders;
import org.springframework.http.MediaType;

import java.time.LocalDateTime;
import java.util.stream.IntStream;

import static org.springframework.restdocs.headers.HeaderDocumentation.*;
import static org.springframework.restdocs.hypermedia.HypermediaDocumentation.linkWithRel;
import static org.springframework.restdocs.hypermedia.HypermediaDocumentation.links;
import static org.springframework.restdocs.mockmvc.MockMvcRestDocumentation.document;
import static org.springframework.restdocs.payload.PayloadDocumentation.*;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;
import static org.springframework.test.web.servlet.result.MockMvcResultHandlers.print;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;


public class EventControllerTests extends BaseControllerTest {

    @Autowired
    EventRepository eventRepository;

    // í…ŒìŠ¤íŠ¸ ì½”ë“œ ìƒëµ
}    
```  
```java
package me.hantomas.restapi.index;

import me.hantomas.restapi.common.BaseControllerTest;
import org.junit.Test;

import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;
import static org.springframework.test.web.servlet.result.MockMvcResultHandlers.print;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.jsonPath;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;



public class IndexControllerTest extends BaseControllerTest {

    @Test
    public void index() throws Exception {
        this.mockMvc.perform(get("/api/"))
                .andDo(print())
                .andExpect(status().isOk())
                .andExpect(jsonPath("_links.events").exists());
    }
}

```  
* importë¬¸ì´ ëˆˆì— ë„ê²Œ ì¤„ì–´ë“ ê²ƒë§Œ ë´ë„ ì½”ë“œê°€ ê°„ì†Œí™” ëœê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.  
  
---  
### ê²°ê³¼ (ì„±ê³µ)  
![image](https://github.com/han-tomas/han-tomas.github.io/assets/124488773/8b8946dd-75b2-4ef3-b77b-6f85897de45e)  

 





